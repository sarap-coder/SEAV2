<?xml version="1.0" encoding="UTF-8"?>
<launch>

    <arg name="joint_name"/>
    <arg name="joint_cfg_name" default=""/>
    <arg name="controller_pkg_name" default=""/>
    <arg name="ns" default=""/>
    <arg name="safety_override" default=""/>

    <group if="$(eval arg('safety_override') != ''
        and arg('safety_override') != 'true'
        and arg('safety_override') != 'false'
        and arg('safety_override') != true
        and arg('safety_override') != false)">
        <rosparam command="load" ns="/" file="PARAMETER__safety_override__HAS_UNSUPPORTED_VALUE__$(arg safety_override)" />
    </group>

    <arg name="safety_ns" value="$(arg ns)/$(arg joint_name)/safety"/>
    <arg name="safety_cfg_path" value="$(eval find(arg('controller_pkg_name')) + '/config/')"/>

    <rosparam command="load" ns="$(arg safety_ns)"
        file="$(arg safety_cfg_path)/default_safety_parameters.yaml" />
    <rosparam command="load" ns="$(arg safety_ns)"
        file="$(eval arg('safety_cfg_path') + '/local_joint_control/actuator_parameters/' + arg('joint_cfg_name') + '_safety.yaml')" />

    <!-- specifics configuration -->
    <arg name="specific_file_path" value="$(eval optenv(arg('controller_pkg_name') + '_specifics_path', find(arg('controller_pkg_name'))))"/>
    <rosparam command="load" ns="$(arg ns)"
        file="$(eval arg('specific_file_path') + '/config/local_joint_control/actuator_parameters/actuator_safety_specific_params.yaml')" />


    <group if="$(eval arg('safety_override') != '')">
        <param name="$(arg safety_ns)/enable_safety" value="$(arg safety_override)" />
    </group>

</launch>
